<div class="right-panel">
    <div *ngIf="data.length !== 0">
      <div class="toolbar" style="padding-bottom:0px;"></div>
      <div class="spacer"></div>
      <div class="table-container">
        <nz-table #nzTable [nzDataSource]="data" [nzPageSize]="10" (nzDataChange)="_displayDataChange($event)" [nzCustomNoResult]="true"
          (nzPageIndexChange)="_refreshStatus()" (nzPageSizeChange)="_refreshStatus()">
          <thead nz-thead>
            <tr>
              <th nz-th [nzCheckbox]="true">
                <label nz-checkbox [(ngModel)]="_allChecked" [nzIndeterminate]="_indeterminate" (ngModelChange)="_checkAll($event)">
                </label>
              </th>
              <th nz-th *ngFor="let col of columns">
                <span>{{col}}</span>
                <nz-table-sort [(nzValue)]="sortMap[col]" (nzValueChange)="sort(col,$event)"></nz-table-sort>
              </th>
              <th nz-th></th>
            </tr>
          </thead>
          <tbody nz-tbody>
            <tr nz-tbody-tr *ngFor="let data of nzTable.data">
              <td nz-td [nzCheckbox]="true">
                <label nz-checkbox [(ngModel)]="data.checked" (ngModelChange)="_refreshStatus($event)">
                </label>
              </td>
              <td nz-td>{{data.name}}</td>
              <td nz-td>{{data.email}}</td>
              <td nz-td class="options-column">
                  <nz-radio-group [(ngModel)]="_rowIndex" (ngModelChange)="_refreshStatus($event)" *ngFor="let option of tableRowEditingOptions; index as i">
                      <p *ngIf= "i === 1 || i === 2" [ngClass]= "i === 2 ? 'disablebuttons' : ''"  nz-radio-button [nzValue]="data.id" (click)= "i === 2 ? false : updateRowIndex(data.id, option)">{{option.label}}</p>
                  </nz-radio-group>
              </td>
            </tr>
          </tbody>
          <div noResult>No Data</div>
        </nz-table>
      </div>
    </div>
    <div *ngIf="data.length === 0 && !isLoading" class="center-container">
      <div class="center-item">
        <div>No Users associated with current project.</div>
      </div>
    </div>
    <div *ngIf="data.length === 0 && isLoading" class="center-container">
      <nz-spin></nz-spin>
    </div>
  </div>
   <nz-modal [nzStyle] = "{'width':'600px'}"  [nzVisible]="isCreateModalVisible" [nzTitle]="this.userToUpdate ? 'Update User' : 'Create User'" [nzContent]="modalContent"
   (nzOnCancel)="handleCreateUserCancel()" (nzOnOk)="handleCreateUserOk()" [nzOkText]="'OK'" [nzCancelText]="'Cancel'" [nzFooter]="userFooter" [nzConfirmLoading]="isModalConfirmLoading">
   <ng-template #modalContent>
     <nz-alert  *ngIf ="viewModal" [nzType]="'warning'" [nzCloseable]="true" (nzOnClose)="onCloseAlert()" nzShowIcon>
         <span  alert-body>
           <pre class="notification">Read-only.</pre>
         </span>
     </nz-alert>
     <div nz-row class="content">
       Name
     </div>
     <div nz-row>
       <input [disabled]= "viewModal" [(ngModel)]="usernameInput" placeholder="Name" (ngModelChange)="checkDuplicateUserNames('name')" [ngClass]="duplicateUserNameFound ? 'error-border' : 'editField'">
     </div>
     <div nz-row style="margin-top: 20px;">
       Email
     </div>
     <div nz-row>
       <nz-input [disabled]= "viewModal" [(ngModel)]="emailInput" [nzPlaceHolder]="'Email'" (ngModelChange)="userEmailChange($event); checkDuplicateUserNames('email')" [ngClass]="{'user-error-border' : showEmailError || duplicateUserEmailFound}"></nz-input>
       <div *ngIf="showEmailError" class="error-style">Email Address format is not correct</div>
       <div *ngIf="duplicateUserEmailFound" class='error-style'>
         Email already exists. Please enter new Email.
       </div>
     </div>
     <div nz-row style="margin-top: 20px;">
       Password
     </div>
     <div nz-row>
       <nz-input [disabled]= "viewModal" [nzType]="'password'" [(ngModel)]="passwordInput" [nzPlaceHolder]="'Password'"></nz-input>
     </div>
     <div nz-row class="content">
       Role
     </div>
     <div nz-row>
       <div class="options">
           <nz-radio-group [(ngModel)]="userRole">
               <label [nzDisabled]="viewModal" nz-radio [nzValue]="'INFRA_ADMIN'">
                   <span>Infrastructure Admin</span>
               </label>
               <label [nzDisabled]="viewModal" nz-radio [nzValue]="'USER'">
                   <span>User</span>
               </label>
           </nz-radio-group>
       </div>
     </div>
   </ng-template>
   <ng-template #userFooter>
     <button nz-button (click)="handleCreateUserCancel()">
       <span>Cancel</span>
     </button>
     <button nz-button (click)="handleCreateUserCancel()" [nzType]="'primary'">
         <span>Done</span>
     </button>
   </ng-template>
 </nz-modal>